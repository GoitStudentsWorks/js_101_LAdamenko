import { apiPost } from "./api.js"; const form = document.getElementById("contact-form"), emailInput = document.getElementById("email"), textarea = document.getElementById("comment"), emailValidationMessage = document.getElementById("emailValidationMessage"), commentValidationMessage = document.getElementById("CommentValidationMessage"); document.addEventListener("DOMContentLoaded", (function () { const e = document.querySelector("[data-modal]"), t = document.querySelector("[data-modal-close]"), a = emailInput.style.borderBottomColor; function o() { e.classList.add("is-hidden") } form.addEventListener("submit", (function (t) { if (t.preventDefault(), !validateComment()) return; const o = new FormData(form), n = o.get("email"), i = o.get("comment"); apiPost({ email: n, comment: i }).then((t => { e.classList.remove("is-hidden"), form.reset(), emailInput.style.borderBottomColor = a, emailValidationMessage.classList.add("hidden-container-for-footer"), emailInput.style.borderBottomColor = a, commentValidationMessage.classList.add("hidden-container-for-footer"), textarea.style.borderBottomColor = a, textarea.value = "" })).catch((e => { })) })), t.addEventListener("click", (function () { o() })), e.addEventListener("click", (function (t) { t.target === e && o() })), document.addEventListener("keydown", (function (t) { "Escape" !== t.key || e.classList.contains("is-hidden") || o() })) })); const originalBorderColor = emailInput.style.borderBottomColor; function validateEmail() { const e = new RegExp(emailInput.pattern); return "" === emailInput.value ? (emailValidationMessage.classList.add("hidden-container-for-footer"), emailInput.style.borderBottomColor = originalBorderColor, !1) : e.test(emailInput.value) ? (emailValidationMessage.classList.remove("hidden-container-for-footer"), emailValidationMessage.textContent = "Success!", emailValidationMessage.style.color = "#3cbc81", emailInput.style.borderBottomColor = "#3cbc81", !0) : (emailValidationMessage.classList.remove("hidden-container-for-footer"), emailValidationMessage.textContent = "Invalid email, try again", emailValidationMessage.style.color = "#e74a3b", emailInput.style.borderBottomColor = "#e74a3b", !1) } function validateComment() { return "" !== textarea.value.trim() && null !== textarea.value || (commentValidationMessage.classList.remove("hidden-container-for-footer"), commentValidationMessage.textContent = "Please, type somesing", commentValidationMessage.style.color = "#DAA520", textarea.style.borderBottomColor = "#DAA520", !1) } emailInput.addEventListener("input", validateEmail); let originalText = "", maxLength = 0; function updateMaxLength() { const e = document.getElementById("comment").offsetWidth; maxLength = Math.floor(e / 8) } function truncateText() { textarea.value.length > maxLength ? (originalText = textarea.value, textarea.value = originalText.substring(0, maxLength) + "...") : originalText = textarea.value } window.addEventListener("load", (function () { updateMaxLength() })), window.addEventListener("resize", updateMaxLength), textarea.addEventListener("blur", (function () { truncateText() })), textarea.addEventListener("focus", (function () { textarea.value = originalText }));